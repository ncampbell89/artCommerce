{"ast":null,"code":"import Axios from '../../Axios/Axios';\nimport setAuthJwt from '../../Axios/setAuthJWT';\nimport jwt_decode from 'jwt-decode';\nexport var handleSignUpAPI = function handleSignUpAPI(data) {\n  return new Promise(function (resolve, reject) {\n    Axios.post('/users/createuser', data) // data is this.state in signup.js\n    .then(function (result) {\n      resolve(result);\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n};\nexport var handleSignInAPI = function handleSignInAPI(data) {\n  return new Promise(function (resolve, reject) {\n    Axios.post('/users/loginuser', data).then(function (result) {\n      resolve(result);\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n}; // export const handleSignInAPI = (data) => {\n//     return new Promise((resolve, reject) => {\n//         Axios.post('/users/loginuser', data)\n//         .then(result => {\n//             console.log(result.data);\n//             // we grab the token from the array 'result.data'\n//             const { token } = result.data;\n//             setAuthJwt(token);\n//             // to view the key in the inspector. It's stored in the local storage\n//             localStorage.setItem('jwtToken', token);\n//             // decoded shows more explicity about the json web token\n//             // {id: \"5c5c5cac1ed139024dd47fa9\", email: \"test\", iat: 1549558760, exp: 1549562360}\n//             const decoded = jwt_decode(token);\n//             resolve(decoded);\n//         })\n//         .catch(error => {\n//             reject(error)\n//         })\n//     })\n// }\n\nexport var JWTexpirationAndLogin = function JWTexpirationAndLogin() {\n  return new Promise(function (resolve, reject) {\n    var token = localStorage.getItem('jwtToken');\n\n    if (token) {\n      var currentTime = Date.now() / 1000;\n      var decoded = jwt_decode(token); // decoded: {id: \"5c5c5cac1ed139024dd47fa9\", email: \"test\", iat: 1549558760, exp: 1549562360}\n\n      if (decoded.exp < currentTime) {\n        localStorage.removeItem('jwtToken');\n        setAuthJwt(null);\n        reject(null);\n      } else {\n        setAuthJwt(token);\n        resolve(token);\n      }\n    } else {\n      setAuthJwt(null);\n    }\n  });\n};\nexport var handleSignOutAPI = function handleSignOutAPI(data) {\n  Axios.get('/users/logoutuser', data).then(function (result) {\n    return resolve(result);\n  }).catch(function (error) {\n    return reject(error);\n  });\n};","map":{"version":3,"sources":["/Users/Nicki/Desktop/artsy/frontend/src/Components/Containers/API/userAPI.js"],"names":["Axios","setAuthJwt","jwt_decode","handleSignUpAPI","data","Promise","resolve","reject","post","then","result","catch","error","handleSignInAPI","JWTexpirationAndLogin","token","localStorage","getItem","currentTime","Date","now","decoded","exp","removeItem","handleSignOutAPI","get"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,mBAAlB;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD,EAAU;AACrC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCP,IAAAA,KAAK,CAACQ,IAAN,CAAW,mBAAX,EAAgCJ,IAAhC,EAAsC;AAAtC,KACMK,IADN,CACW,UAAAC,MAAM,EAAI;AACZJ,MAAAA,OAAO,CAACI,MAAD,CAAP;AACH,KAHN,EAIMC,KAJN,CAIY,UAAAC,KAAK,EAAI;AACZL,MAAAA,MAAM,CAACK,KAAD,CAAN;AACH,KANN;AAOH,GARM,CAAP;AASH,CAVM;AAYP,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACT,IAAD,EAAU;AACrC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCP,IAAAA,KAAK,CAACQ,IAAN,CAAW,kBAAX,EAA+BJ,IAA/B,EACMK,IADN,CACW,UAAAC,MAAM,EAAI;AACZJ,MAAAA,OAAO,CAACI,MAAD,CAAP;AACH,KAHN,EAIMC,KAJN,CAIY,UAAAC,KAAK,EAAI;AACZL,MAAAA,MAAM,CAACK,KAAD,CAAN;AACH,KANN;AAOH,GARM,CAAP;AASH,CAVM,C,CAYP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,IAAME,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AACvC,SAAO,IAAIT,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,QAAIQ,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;;AACA,QAAGF,KAAH,EAAU;AACN,UAAMG,WAAW,GAAGC,IAAI,CAACC,GAAL,KAAa,IAAjC;AACA,UAAMC,OAAO,GAAGnB,UAAU,CAACa,KAAD,CAA1B,CAFM,CAGN;;AAEA,UAAGM,OAAO,CAACC,GAAR,GAAcJ,WAAjB,EAA8B;AAC1BF,QAAAA,YAAY,CAACO,UAAb,CAAwB,UAAxB;AACAtB,QAAAA,UAAU,CAAC,IAAD,CAAV;AACAM,QAAAA,MAAM,CAAC,IAAD,CAAN;AACH,OAJD,MAIO;AACHN,QAAAA,UAAU,CAACc,KAAD,CAAV;AACAT,QAAAA,OAAO,CAACS,KAAD,CAAP;AACH;AACJ,KAbD,MAaO;AACHd,MAAAA,UAAU,CAAC,IAAD,CAAV;AACH;AACJ,GAlBM,CAAP;AAmBH,CApBM;AAsBP,OAAO,IAAMuB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACpB,IAAD,EAAU;AACtCJ,EAAAA,KAAK,CAACyB,GAAN,CAAU,mBAAV,EAA+BrB,IAA/B,EACCK,IADD,CACM,UAAAC,MAAM;AAAA,WAAIJ,OAAO,CAACI,MAAD,CAAX;AAAA,GADZ,EAECC,KAFD,CAEO,UAAAC,KAAK;AAAA,WAAIL,MAAM,CAACK,KAAD,CAAV;AAAA,GAFZ;AAGH,CAJM","sourcesContent":["import Axios from '../../Axios/Axios';\nimport setAuthJwt from '../../Axios/setAuthJWT';\nimport jwt_decode from 'jwt-decode';\n\nexport const handleSignUpAPI = (data) => {\n    return new Promise((resolve, reject) => {\n        Axios.post('/users/createuser', data) // data is this.state in signup.js\n             .then(result => {\n                 resolve(result)\n             })\n             .catch(error => {\n                 reject(error)\n             })\n    })\n}\n\nexport const handleSignInAPI = (data) => {\n    return new Promise((resolve, reject) => {\n        Axios.post('/users/loginuser', data) \n             .then(result => {\n                 resolve(result)\n             })\n             .catch(error => {\n                 reject(error)\n             })\n    })\n}\n\n// export const handleSignInAPI = (data) => {\n//     return new Promise((resolve, reject) => {\n//         Axios.post('/users/loginuser', data)\n//         .then(result => {\n//             console.log(result.data);\n//             // we grab the token from the array 'result.data'\n//             const { token } = result.data;\n//             setAuthJwt(token);\n\n//             // to view the key in the inspector. It's stored in the local storage\n//             localStorage.setItem('jwtToken', token);\n\n//             // decoded shows more explicity about the json web token\n//             // {id: \"5c5c5cac1ed139024dd47fa9\", email: \"test\", iat: 1549558760, exp: 1549562360}\n//             const decoded = jwt_decode(token);\n//             resolve(decoded);\n//         })\n//         .catch(error => {\n//             reject(error)\n//         })\n//     })\n// }\n\nexport const JWTexpirationAndLogin = () => {\n    return new Promise((resolve, reject) => {\n        var token = localStorage.getItem('jwtToken');\n        if(token) {\n            const currentTime = Date.now() / 1000;\n            const decoded = jwt_decode(token);\n            // decoded: {id: \"5c5c5cac1ed139024dd47fa9\", email: \"test\", iat: 1549558760, exp: 1549562360}\n\n            if(decoded.exp < currentTime) {\n                localStorage.removeItem('jwtToken');\n                setAuthJwt(null)\n                reject(null)\n            } else {\n                setAuthJwt(token)\n                resolve(token)\n            }\n        } else {\n            setAuthJwt(null)\n        }\n    });\n}\n\nexport const handleSignOutAPI = (data) => {\n    Axios.get('/users/logoutuser', data)\n    .then(result => resolve(result))\n    .catch(error => reject(error));\n}"]},"metadata":{},"sourceType":"module"}